(function(){"use strict";var e={564:function(e,t,a){var n=a(7195),s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("h1",{staticClass:"d-flex justify-content-center my-4 fs-2 text-primary"},[e._v("云间世纪销售排行")]),t("search",{ref:"searchRef",on:{getLoadEcharts:e.getLoadEcharts}}),t("div",[t("div",{staticClass:"d-flex justify-content-center flex-wrap"},[t("div",{class:e.detailShow?"hw300":"cc-max-min"},[t("div",{attrs:{id:"echart"}})]),e.detailShow?t("div",{staticClass:"hw400"},[t("table",{staticClass:"table tb-fs12"},[e._m(0),t("tbody",e._l(e.tableData,(function(a,n){return t("tr",{key:n},[t("th",{attrs:{scope:"row"}},[e._v(e._s(n+1))]),t("td",[e._v(e._s(a.discount))]),t("td",[e._v(e._s(a.book_name))]),t("td",[e._v(e._s((a.shiyang/e.saleNumObj.shiyangSum*100).toFixed(6))+" %")])])})),0)])]):e._e()]),e.detailShow?t("div",{staticClass:"d-flex justify-content-center"},[e._m(1)]):e._e()])],1)},i=[function(){var e=this,t=e._self._c;return t("thead",[t("tr",[t("th",{attrs:{scope:"col"}},[e._v("折扣内排行")]),t("th",{attrs:{scope:"col"}},[e._v("博库分销折扣")]),t("th",{attrs:{scope:"col"}},[e._v("书名")]),t("th",{attrs:{scope:"col"}},[e._v("云间销售占比")])])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"row-chart-st"},[t("div",{attrs:{id:"rowChart"}})])}],r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"w-100"},[t("div",{staticClass:"d-md-block d-none"},[t("div",{staticClass:"d-flex justify-content-center w-100"},[t("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"mini","unlink-panels":"","append-to-body":!1},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}}),t("el-select",{staticClass:"mx-2",attrs:{placeholder:"出版社",size:"mini",clearable:""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value,size:"mini"}})})),1),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.getData}},[e._v("搜索")])],1)]),t("div",{staticClass:"d-md-none"},[t("div",{staticClass:"d-flex justify-content-center w-100 my-3"},[t("el-date-picker",{attrs:{type:"daterange","range-separator":"-","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期",size:"mini","unlink-panels":"","append-to-body":!1,editable:!1},model:{value:e.dateRange,callback:function(t){e.dateRange=t},expression:"dateRange"}})],1),t("div",{staticClass:"d-flex justify-content-center w-100"},[t("el-select",{staticClass:"me-2",attrs:{placeholder:"出版社",size:"mini",clearable:""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value,size:"mini"}})})),1),t("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.getData}},[e._v("搜索")])],1)])])},o=[],l=a(19),c=a(5114),d=a.n(c),u=a(1579),h=a.n(u);let f,p=0;function m(e){const t=document.querySelector(".main-wrap");0!==p||f||(f=c.Loading.service({lock:!0,text:"加载中...",background:"rgba(255, 255, 255, 0.5)",target:e||t||"body"})),p++}const g=l.Z.create({baseURL:window.env.BASE_API,timeout:1e4,headers:{"Content-Type":"application/json;charset=UTF-8",tenant:1},transformRequest:[function(e){return"[object FormData]"===Object.prototype.toString.call(e)?e:JSON.stringify(e)}]});function v(){p--,p=Math.max(p,0),0===p&&b()}var b=h().debounce((()=>{f&&f.close(),f=null}),300);g.interceptors.request.use((e=>(m(e.headers.loadingTarget),(/get/i.test(e.method)||/delete/i.test(e.method))&&(e.params=e.data),e)),(e=>(v(),(0,c.Message)({message:"服务器请求失败，请稍后再试或联系管理员",type:"error",duration:3e3}),Promise.reject(e)))),g.interceptors.response.use((e=>{if(v(),200===e.status){const t=e.data;return t}}),(e=>(console.log(e),e.response&&e.response&&e.response.data&&e.response.data.message?(0,c.Message)({message:e.response.data.message,type:"error",duration:3e3}):(0,c.Message)({message:"系统异常",type:"error",duration:3e3}),v(),Promise.reject(e))));var y=g;const w=e=>y({url:"/getpubList",method:"get"}),_=e=>y({url:"/index",method:"get",data:e}),x=e=>y({url:"/discountDetail",method:"get",data:e});var S={data(){return{dateRange:[],options:[],value:""}},mounted(){this.getPublishList()},methods:{getData(){if(!this.dateRange.length)return this.$message.error("请选择开始或结束时间");if(!this.value)return this.$message.error("请选择出版社");const e={startTime:this.dateRange[0],endTime:this.dateRange[1],publisher:this.value};_(e).then((e=>{200===e.code&&e.data.length,this.$emit("getLoadEcharts",{data:e.data,name:this.value,date:this.dateRange})}))},getPublishList(){w().then((e=>{200===e.code&&e.data.length&&(this.options=e.data.map((e=>({label:e.publisher_name,value:e.publisher_name}))))}))}}},k=S,j=a(1001),z=(0,j.Z)(k,r,o,!1,null,"0a1ad6fe",null),C=z.exports,O={components:{search:C},data(){return{detailShow:!1,tableData:[],saleNumObj:{shiyangSum:1},labelData1:[],labelData2:[]}},mounted(){},methods:{changeSize(e){return()=>e.resize()},changeSize2(e){return()=>e.resize()},getLoadEcharts(e){console.log(e);const t=e.data.map((e=>({name:e.discount,value:e.pzNum}))),a=this,n=this.$echarts.init(document.getElementById("echart"));window.addEventListener("resize",this.changeSize(n)),n.on("click",(function(e){console.log(e.data.name),a.$nextTick((()=>{a.getLoadEcharts2(e.data.name,n)}))}));const s={title:{text:e.name||"",left:"center"},tooltip:{trigger:"item"},series:[{name:"销售排行",type:"pie",radius:["40%","70%"],itemStyle:{borderRadius:10,borderColor:"#fff",borderWidth:2},label:{show:!0,position:"inner"},data:t||[],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};n.setOption(s)},getLoadEcharts2(e,t){const a={startTime:this.$refs.searchRef.dateRange[0],endTime:this.$refs.searchRef.dateRange[1],publisher:this.$refs.searchRef.value,discount:e};x(a).then((e=>{console.log(e),this.detailShow=!0,200===e.code&&(this.tableData=e.data.data1,console.log(this.tableData),this.saleNumObj=e.data.data2[0],this.labelData1=this.tableData.map((e=>e.book_name+", "+(e.shiyang/this.saleNumObj.shiyangSum*100).toFixed(6)+"%")),this.labelData2=this.tableData.map((e=>e.shiyang)),this.$nextTick((()=>{this.rewriteChart2(),this.changeSize(t)()})))}))},rewriteChart2(){const e=this.$echarts.init(document.getElementById("rowChart"));window.addEventListener("resize",this.changeSize2(e));const t={xAxis:{axisLabel:{color:"#999"},position:"top",type:"value"},yAxis:{data:this.labelData1,axisLabel:{inside:!0,color:"#000"},axisTick:{show:!1},axisLine:{show:!1},z:10,type:"category"},series:[{data:this.labelData2,type:"bar",itemStyle:{color:"#f7db73"}}]};e.setOption(t)}},beforeDestroy(){window.removeEventListener("resize",this.changeSize()),window.removeEventListener("resize",this.changeSize2())}},R=O,D=(0,j.Z)(R,s,i,!1,null,"2fbe8788",null),L=D.exports,T=a(2241);n["default"].use(T.ZP);const E=[],P=new T.ZP({routes:E});var $=P,M=a(408);n["default"].use(M.ZP);var Z=new M.ZP.Store({state:{},getters:{},mutations:{},actions:{},modules:{}}),N=a(4359),A=a(7244),F=(a(7024),a(6698)),B=a.n(F),q=a(9124);n["default"].use(N.XG7),n["default"].use(A.A7),n["default"].prototype.$echarts=q,n["default"].use(B()),n["default"].use(d()),n["default"].config.productionTip=!1,new n["default"]({router:$,store:Z,render:e=>e(L)}).$mount("#app")}},t={};function a(n){var s=t[n];if(void 0!==s)return s.exports;var i=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(i.exports,i,i.exports,a),i.loaded=!0,i.exports}a.m=e,function(){var e=[];a.O=function(t,n,s,i){if(!n){var r=1/0;for(d=0;d<e.length;d++){n=e[d][0],s=e[d][1],i=e[d][2];for(var o=!0,l=0;l<n.length;l++)(!1&i||r>=i)&&Object.keys(a.O).every((function(e){return a.O[e](n[l])}))?n.splice(l--,1):(o=!1,i<r&&(r=i));if(o){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,s,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var s,i,r=n[0],o=n[1],l=n[2],c=0;if(r.some((function(t){return 0!==e[t]}))){for(s in o)a.o(o,s)&&(a.m[s]=o[s]);if(l)var d=l(a)}for(t&&t(n);c<r.length;c++)i=r[c],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},n=self["webpackChunkfx_web"]=self["webpackChunkfx_web"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(564)}));n=a.O(n)})();
//# sourceMappingURL=app.4e46228f.js.map